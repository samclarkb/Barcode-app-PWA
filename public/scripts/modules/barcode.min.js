import{loadingState,removeLoadingState}from"./ui.min.js";export async function detect(){loadingState();const e=new BarcodeDetector,t=document.querySelector("#camera");let a,o=[];const n=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),r=document.createElement("video");r.srcObject=n,await r.play(),removeLoadingState(),t.append(r);const c=()=>{requestAnimationFrame(c),e.detect(r).then((e=>{e.forEach((e=>{o.includes(e.rawValue)||(o.push(e.rawValue),a=e.rawValue,r.remove(),window.location.href="/results/"+a)}))})).catch(console.error)};c()}
